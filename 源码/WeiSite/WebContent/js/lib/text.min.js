define(["module"],function(l){var n,h,c,d,q,m=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],p=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i=typeof location!=="undefined"&&location.href,g=i&&location.protocol&&location.protocol.replace(/\:/,""),e=i&&location.hostname,f=i&&(location.port||undefined),b={},k=(l.config&&l.config())||{};function o(s,r){return s===undefined||s===""?r:s}function j(t,r,u,s){if(r===s){return true}else{if(t===u){if(t==="http"){return o(r,"80")===o(s,"80")}else{if(t==="https"){return o(r,"443")===o(s,"443")}}}}return false}n={version:"2.0.15",strip:function(r){if(r){r=r.replace(p,"");var s=r.match(a);if(s){r=s[1]}}else{r=""}return r},jsEscape:function(r){return r.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:k.createXhr||function(){var u,s,t;if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest()}else{if(typeof ActiveXObject!=="undefined"){for(s=0;s<3;s+=1){t=m[s];try{u=new ActiveXObject(t)}catch(r){}if(u){m=[t];break}}}}return u},parseName:function(v){var u,r,x,w=false,s=v.lastIndexOf("."),t=v.indexOf("./")===0||v.indexOf("../")===0;if(s!==-1&&(!t||s>1)){u=v.substring(0,s);r=v.substring(s+1)}else{u=v}x=r||u;s=x.indexOf("!");if(s!==-1){w=x.substring(s+1)==="strip";x=x.substring(0,s);if(r){r=x}else{u=x}}return{moduleName:u,ext:r,strip:w}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(y,u,r,t){var x,v,w,s=n.xdRegExp.exec(y);if(!s){return true}x=s[2];v=s[3];v=v.split(":");w=v[1];v=v[0];return(!x||x===u)&&(!v||v.toLowerCase()===r.toLowerCase())&&((!w&&!v)||j(x,w,u,t))},finishLoad:function(s,u,r,t){r=u?n.strip(r):r;if(k.isBuild){b[s]=r}t(r)},load:function(s,w,u,r){if(r&&r.isBuild&&!r.inlineText){u();return}k.isBuild=r&&r.isBuild;var v=n.parseName(s),t=v.moduleName+(v.ext?"."+v.ext:""),x=w.toUrl(t),y=(k.useXhr)||n.useXhr;if(x.indexOf("empty:")===0){u();return}if(!i||y(x,g,e,f)){n.get(x,function(z){n.finishLoad(s,v.strip,z,u)},function(z){if(u.error){u.error(z)}})}else{w([t],function(z){n.finishLoad(v.moduleName+"."+v.ext,v.strip,z,u)})}},write:function(u,t,v,r){if(b.hasOwnProperty(t)){var s=n.jsEscape(b[t]);v.asModule(u+"!"+t,"define(function () { return '"+s+"';});\n")}},writeFile:function(x,u,y,z,r){var w=n.parseName(u),s=w.ext?"."+w.ext:"",v=w.moduleName+s,t=y.toUrl(w.moduleName+s)+".js";n.load(v,y,function(B){var A=function(C){return z(t,C)};A.asModule=function(D,C){return z.asModule(D,t,C)};n.write(x,v,A,r)},r)}};if(k.env==="node"||(!k.env&&typeof process!=="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])){h=require.nodeRequire("fs");n.get=function(v,r,t){try{var u=h.readFileSync(v,"utf8");if(u[0]==="\uFEFF"){u=u.substring(1)}r(u)}catch(s){if(t){t(s)}}}}else{if(k.env==="xhr"||(!k.env&&n.createXhr())){n.get=function(v,r,s,u){var w=n.createXhr(),t;w.open("GET",v,true);if(u){for(t in u){if(u.hasOwnProperty(t)){w.setRequestHeader(t.toLowerCase(),u[t])}}}if(k.onXhr){k.onXhr(w,v)}w.onreadystatechange=function(y){var z,x;if(w.readyState===4){z=w.status||0;if(z>399&&z<600){x=new Error(v+" HTTP status: "+z);x.xhr=w;if(s){s(x)}}else{r(w.responseText)}if(k.onXhrComplete){k.onXhrComplete(w,v)}}};w.send(null)}}else{if(k.env==="rhino"||(!k.env&&typeof Packages!=="undefined"&&typeof java!=="undefined")){n.get=function(z,r){var y,w,t="utf-8",u=new java.io.File(z),x=java.lang.System.getProperty("line.separator"),v=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(u),t)),s="";try{y=new java.lang.StringBuffer();w=v.readLine();if(w&&w.length()&&w.charAt(0)===65279){w=w.substring(1)}if(w!==null){y.append(w)}while((w=v.readLine())!==null){y.append(x);y.append(w)}s=String(y.toString())}finally{v.close()}r(s)}}else{if(k.env==="xpconnect"||(!k.env&&typeof Components!=="undefined"&&Components.classes&&Components.interfaces)){c=Components.classes;d=Components.interfaces;Components.utils["import"]("resource://gre/modules/FileUtils.jsm");q=("@mozilla.org/windows-registry-key;1" in c);n.get=function(x,r){var v,s,u,w={};if(q){x=x.replace(/\//g,"\\")}u=new FileUtils.File(x);try{v=c["@mozilla.org/network/file-input-stream;1"].createInstance(d.nsIFileInputStream);v.init(u,1,0,false);s=c["@mozilla.org/intl/converter-input-stream;1"].createInstance(d.nsIConverterInputStream);s.init(v,"utf-8",v.available(),d.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);s.readString(v.available(),w);s.close();v.close();r(w.value)}catch(t){throw new Error((u&&u.path||"")+": "+t)}}}}}}return n});